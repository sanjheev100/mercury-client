{"version":3,"file":"static/js/65.1e2bb3a7.chunk.js","mappings":"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","sources":["pages/admin/subCategory/SubCategoryCreate.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport {\r\n  AdminNav,\r\n  CategoryCreateForm,\r\n  FormContainer,\r\n  LocalSearch,\r\n} from '../../../components'\r\nimport { useSelector } from 'react-redux'\r\nimport { toast } from 'react-toastify'\r\nimport { getCategories, removeCategory } from '../../../api/category'\r\nimport { Dropdown, OverlayTrigger, Tooltip } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\nimport {\r\n  createSubCategory,\r\n  getSubCategories,\r\n  getSubCategory,\r\n  removeSubCategory,\r\n} from '../../../api/subCategory'\r\n\r\nconst SubCategoryCreate = () => {\r\n  const { user } = useSelector((state) => ({ ...state }))\r\n\r\n  const [name, setName] = useState('')\r\n  const [buttonloading, setButtonLoading] = useState(false)\r\n  //   const [show, setShow] = useState(false)\r\n  const [loading, setLoading] = useState(false)\r\n  const [categories, setCategories] = useState([])\r\n  const [subCategories, setSubCategories] = useState([])\r\n\r\n  //parent category\r\n  const [category, setCategory] = useState('')\r\n\r\n  //search while filter\r\n  const [keyword, setKeyword] = useState('')\r\n\r\n  useEffect(() => {\r\n    loadAllCategories()\r\n    loadAllSubCategories()\r\n  }, [])\r\n\r\n  const loadAllCategories = () => {\r\n    getCategories()\r\n      .then((res) => {\r\n        setCategories(res.data)\r\n      })\r\n      .catch((err) => {\r\n        toast.error('FETCHING CATEGORY ERROR')\r\n      })\r\n  }\r\n  const loadAllSubCategories = () => {\r\n    getSubCategories()\r\n      .then((res) => {\r\n        setSubCategories(res.data)\r\n      })\r\n      .catch((err) => {\r\n        toast.error('FETCHING CATEGORY ERROR')\r\n      })\r\n  }\r\n  const submitHandler = (e) => {\r\n    e.preventDefault()\r\n\r\n    if (!name || name.length < 2) {\r\n      return toast.error(`Name must be atleast 2 characters`, {\r\n        position: 'top-right',\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      })\r\n    }\r\n\r\n    if (!category) {\r\n      return toast.error(`Select the Category`, {\r\n        position: 'top-right',\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      })\r\n    }\r\n    setButtonLoading(true)\r\n    createSubCategory({ name, parent: category }, user.token)\r\n      .then((res) => {\r\n        setButtonLoading(false)\r\n        setName('')\r\n        toast.success(`${res.data.name} is created`, {\r\n          position: 'top-right',\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        })\r\n        loadAllSubCategories()\r\n      })\r\n      .catch((err) => {\r\n        setButtonLoading(false)\r\n        toast.error(err, {\r\n          position: 'top-right',\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        })\r\n      })\r\n  }\r\n\r\n  const handleDelete = async (slug) => {\r\n    if (window.confirm(`are you sure wanna delete ${slug}?`)) {\r\n      setLoading()\r\n      removeSubCategory(slug, user.token)\r\n        .then((res) => {\r\n          setLoading(false)\r\n          toast.error(`${res.data.name} is Deleted`, {\r\n            position: 'top-right',\r\n            autoClose: 5000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n          })\r\n          loadAllSubCategories()\r\n        })\r\n        .catch((err) => {\r\n          setLoading(false)\r\n          toast.error(err.response.data, {\r\n            position: 'top-right',\r\n            autoClose: 5000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n          })\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleSearchChange = (e) => {\r\n    e.preventDefault()\r\n    setKeyword(e.target.value.toLowerCase())\r\n  }\r\n\r\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword)\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <h4 className='text-white text-center'>Loading...</h4>\r\n      ) : (\r\n        <div className='container-fluid'>\r\n          <div className='row'>\r\n            <div className='col-md-2'>\r\n              <AdminNav />\r\n            </div>\r\n            <div className='col'>\r\n              <FormContainer>\r\n                <CategoryCreateForm\r\n                  submitHandler={submitHandler}\r\n                  name={name}\r\n                  setName={setName}\r\n                  buttonloading={buttonloading}\r\n                  title={'Create Sub Category'}\r\n                />\r\n\r\n                {name.length > 0 && (\r\n                  <div className='form-group mb-2'>\r\n                    <label>\r\n                      <strong style={{ color: 'white' }}>\r\n                        Select Category\r\n                      </strong>\r\n                    </label>\r\n                    <select\r\n                      required={true}\r\n                      name='category'\r\n                      className='form-control'\r\n                      onChange={(e) => setCategory(e.target.value)}\r\n                    >\r\n                      <option>---------Please Select Parent--------</option>\r\n                      {categories &&\r\n                        categories.length > 0 &&\r\n                        categories?.map((c) => (\r\n                          <option key={c._id} value={c._id}>\r\n                            {c.name}\r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n                )}\r\n\r\n                <LocalSearch\r\n                  keyword={keyword}\r\n                  handleSearchChange={handleSearchChange}\r\n                />\r\n                {subCategories.filter(searched(keyword)).map((s) => (\r\n                  <div key={s._id} className='alert alert-success'>\r\n                    {s.name}\r\n                    <OverlayTrigger\r\n                      placement='bottom'\r\n                      overlay={<Tooltip id='tooltipment'>Delete</Tooltip>}\r\n                    >\r\n                      <span className='float-end mx-2'>\r\n                        <i\r\n                          className='fa fa-trash  text-danger'\r\n                          aria-hidden='true'\r\n                          style={{ cursor: 'pointer' }}\r\n                          //   onClick={() => setShow(true)}\r\n                          onClick={() => handleDelete(s.slug)}\r\n                        ></i>\r\n                      </span>\r\n                    </OverlayTrigger>\r\n\r\n                    <OverlayTrigger\r\n                      placement='bottom'\r\n                      overlay={<Tooltip id='tooltipment'>Edit</Tooltip>}\r\n                    >\r\n                      <Link\r\n                        to={`/admin/subcategory/${s.slug}`}\r\n                        className='float-end mx-2'\r\n                      >\r\n                        <i\r\n                          className='fa fa-pencil text-primary '\r\n                          aria-hidden='true'\r\n                        ></i>\r\n                      </Link>\r\n                    </OverlayTrigger>\r\n                  </div>\r\n                ))}\r\n              </FormContainer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SubCategoryCreate\r\n"],"names":["user","useSelector","state","useState","name","setName","buttonloading","setButtonLoading","loading","setLoading","categories","setCategories","subCategories","setSubCategories","category","setCategory","keyword","setKeyword","useEffect","loadAllCategories","loadAllSubCategories","getCategories","then","res","data","catch","err","toast","getSubCategories","handleDelete","slug","window","confirm","removeSubCategory","token","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","response","className","submitHandler","e","preventDefault","length","createSubCategory","parent","title","style","color","required","onChange","target","value","map","c","_id","handleSearchChange","toLowerCase","filter","includes","searched","s","placement","overlay","id","cursor","onClick","to"],"sourceRoot":""}