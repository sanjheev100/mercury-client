{"version":3,"file":"static/js/75.872301dc.chunk.js","mappings":"kPA8GA,UAtGsB,WACpB,OAA8BA,EAAAA,EAAAA,UAAS,IAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA8BF,EAAAA,EAAAA,UAAS,IAAvC,eAAOG,EAAP,KAAgBC,EAAhB,KACA,GAA8BJ,EAAAA,EAAAA,WAAS,GAAvC,eAAOK,EAAP,KAAgBC,EAAhB,KACA,GAAwBN,EAAAA,EAAAA,UAAS,GAAjC,eAAOO,EAAP,KAAaC,EAAb,KACA,GAAwCR,EAAAA,EAAAA,WAAS,GAAjD,eAAOS,EAAP,KAAqBC,EAArB,KAEQC,GAASC,EAAAA,EAAAA,MAATD,KAEAE,GAASC,EAAAA,EAAAA,KAAY,SAACC,GAAD,iBAAiBA,MAAtCF,MAERG,EAAAA,EAAAA,YAAU,WACRC,MACC,CAACN,KAEJK,EAAAA,EAAAA,YAAU,WACR,GAAIf,EAAQiB,SAAWL,EAAM,CAC3B,IAAIM,EAAuBlB,EAAQiB,QAAQE,MACzC,SAACC,GAAD,OAASA,EAAIC,SAASC,YAAcV,EAAKW,IAAID,cAG/CJ,GAAwBX,EAAQW,EAAqBZ,UAIzD,IAAMU,EAAoB,WACxBX,GAAW,IACXmB,EAAAA,EAAAA,IAAkBd,GACfe,MAAK,SAACC,GACLrB,GAAW,GACXJ,EAAWyB,EAAIC,OAEfC,EAAAA,EAAAA,IAAkBF,EAAIC,KAAKJ,KAAKE,MAAK,SAACC,GACpCvB,EAAWuB,EAAIC,YAIlBE,OAAM,SAACC,GACNzB,GAAW,GACX0B,EAAAA,GAAAA,MAAYD,OAoBlB,OACE,8BACG1B,GACC,qCAEA,iCACE,0BACE,SAAC,KAAD,CACEJ,QAASA,EACTgC,YAzBQ,SAACC,EAAWC,GAC9B,IAAKD,EACH,OAAOF,EAAAA,GAAAA,MAAY,8BAErBxB,EAAQ0B,IACRE,EAAAA,EAAAA,IAAYD,EAAMD,EAAWrB,EAAKwB,OAC/BX,MAAK,SAACC,GACLV,IACAe,EAAAA,GAAAA,QAAc,+BAEfF,OAAM,SAACC,GACNO,QAAQC,IAAIR,OAeNxB,KAAMA,EACNG,gBAAiBA,EACjBD,aAAcA,OAGlB,mBACA,mBACA,mBACA,mBACA,UAAC,IAAD,YACE,SAAC,IAAD,CAAK+B,UAAU,MAAf,UACE,SAAC,IAAD,CAAKA,UAAU,wBAAf,UACE,eAAIC,MAAO,CAAEC,MAAO,SAApB,mCAGJ,gBAAKF,UAAU,WAAf,SACGrC,EAAQwC,OACPxC,EAAQyC,KAAI,SAACC,GAAD,OACV,gBAAuBL,UAAU,WAAjC,UACE,SAAC,KAAD,CAAavC,QAAS4C,KADdA,EAAQrB,SAKpB,gBAAKgB,UAAU,kBAAf","sources":["pages/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { getProductDetails, productStar } from '../api/product'\r\nimport { useParams } from 'react-router-dom'\r\nimport { toast } from 'react-toastify'\r\nimport { ProductCard, ProductDetailCard } from '../components'\r\nimport { Col, Container, Row, Stack } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport { getRelatedProduct } from '../api/product'\r\nconst ProductDetail = () => {\r\n  const [product, setProduct] = useState([])\r\n  const [related, setRelated] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [star, setStar] = useState(0)\r\n  const [modalVisible, setModalVisible] = useState(false)\r\n\r\n  const { slug } = useParams()\r\n\r\n  const { user } = useSelector((state) => ({ ...state }))\r\n\r\n  useEffect(() => {\r\n    loadSingleProduct()\r\n  }, [slug])\r\n\r\n  useEffect(() => {\r\n    if (product.ratings && user) {\r\n      var existingRatingObject = product.ratings.find(\r\n        (ele) => ele.postedBy.toString() == user._id.toString()\r\n      )\r\n\r\n      existingRatingObject && setStar(existingRatingObject.star)\r\n    }\r\n  })\r\n\r\n  const loadSingleProduct = () => {\r\n    setLoading(true)\r\n    getProductDetails(slug)\r\n      .then((res) => {\r\n        setLoading(false)\r\n        setProduct(res.data)\r\n        //loading related\r\n        getRelatedProduct(res.data._id).then((res) => {\r\n          setRelated(res.data)\r\n          // console.log('************', res.data)\r\n        })\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false)\r\n        toast.error(err)\r\n      })\r\n  }\r\n\r\n  const onStarClick = (newRating, name) => {\r\n    if (!newRating) {\r\n      return toast.error('Cannot Submit Empty Rating')\r\n    }\r\n    setStar(newRating)\r\n    productStar(name, newRating, user.token)\r\n      .then((res) => {\r\n        loadSingleProduct()\r\n        toast.success('Thanks For giving Rating')\r\n      })\r\n      .catch((err) => {\r\n        console.log(err)\r\n      })\r\n    // console.log(newRating, name)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <h4>Loading</h4>\r\n      ) : (\r\n        <>\r\n          <div>\r\n            <ProductDetailCard\r\n              product={product}\r\n              onStarClick={onStarClick}\r\n              star={star}\r\n              setModalVisible={setModalVisible}\r\n              modalVisible={modalVisible}\r\n            />\r\n          </div>\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <Container>\r\n            <Row className='p-5'>\r\n              <Col className='text-center pt-5 pb-5'>\r\n                <h3 style={{ color: 'white' }}>Related Products</h3>\r\n              </Col>\r\n            </Row>\r\n            <div className='row pb-5'>\r\n              {related.length ? (\r\n                related.map((relProd) => (\r\n                  <div key={relProd._id} className='col-md-4'>\r\n                    <ProductCard product={relProd} />\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <div className='text-center col'>NO RELATED PRODUCTS FOUND</div>\r\n              )}\r\n            </div>\r\n          </Container>\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProductDetail\r\n"],"names":["useState","product","setProduct","related","setRelated","loading","setLoading","star","setStar","modalVisible","setModalVisible","slug","useParams","user","useSelector","state","useEffect","loadSingleProduct","ratings","existingRatingObject","find","ele","postedBy","toString","_id","getProductDetails","then","res","data","getRelatedProduct","catch","err","toast","onStarClick","newRating","name","productStar","token","console","log","className","style","color","length","map","relProd"],"sourceRoot":""}